plugins {
    id 'io.micronaut.build.internal.spring-module'
}

dependencies {
    api(platform(libs.boms.spring))
    api projects.micronautSpringContext
    api libs.spring.web
    api mn.reactor

    implementation mn.micronaut.http

    compileOnly mn.micronaut.http.server.netty
    compileOnly(mnViews.micronaut.views.core)

    testAnnotationProcessor mn.micronaut.inject.java
    testAnnotationProcessor projects.micronautSpringAnnotation
    testAnnotationProcessor projects.micronautSpringWebAnnotation

    testImplementation mn.micronaut.inject.java
    testImplementation mnValidation.micronaut.validation
    testImplementation mn.micronaut.jackson.databind
    testImplementation mn.micronaut.http.client
    testImplementation mn.micronaut.http.server.netty

    testRuntimeOnly(mnViews.micronaut.views.thymeleaf)

    testRuntimeOnly libs.spring.boot.starter.thymeleaf
}

//compileTestJava.options.fork = true
//compileTestJava.options.forkOptions.jvmArgs = ['-Xdebug', '-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005']

micronautBuild {
    binaryCompatibility {
        enabled = true
        // TODO required for now. Remove after Micronaut 4 release
        baselineVersion = "5.0.0-M6"
    }
}
